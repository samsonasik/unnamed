## Customize the test machine
machine:

  timezone:
    Europe/Sofia # Set the timezone

  # Version of php to use
  php:
    version: 5.5.21
  node:
    version: 2.14.3

## Customize dependencies
dependencies:
  pre:
    - mysql -u ubuntu -e 'create database IF NOT EXISTS xj;'
    - cp config/autoload/doctrine.local.php.dist config/autoload/doctrine.local.php

  override:
    - sudo apt-get install parallel
    - sudo apt-get install nodejs npm
    - composer install --prefer-source --optimize-autoloader
    - npm install gulp
    - npm install

## Customize test commands
test:
  override:
  - ls -d module/*/test/PHPUnit | parallel --gnu --keep-order 'echo "Running {} tests"; ./vendor/bin/phpunit -c {}/phpunit.xml;' || exit 1
  - cd ..
